<% flash.each do |name, msg| %>
  <%= content_tag :div, msg, class: name %>
<% end %>

<% if logged_in? %>
  <p>Logged in as: <%= current_user.github_username %>.</p>
  <p><%= link_to "Log out", session_path, method: :delete %></p>

  <p>
    <%# TODO (2016-02-15) Use the controller for this %>
    <%= render 'github_projects', projects: GithubProjects.new(current_user).fetch(page: params[:page]) %>
  </p>
<% else %>
  <p>
    Not logged in.
    <%= link_to "Log in with github", @login_flow.auth_url(redirect_to: github_auth_success_url) %>
  </p>
<% end %>
